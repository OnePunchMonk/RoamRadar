<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
    <script>
        document.addEventListener("DOMContentLoaded", async () => {
            try {
                const response = await fetch('https://thawing-eyrie-19296-07f5925e2a04.herokuapp.com/user-dashboard');

                const data = await response.json();
                if (data.success) {
                    document.querySelector('h1').textContent = `Hello, ${data.username}`;
                } else {
                    alert('Failed to load user data');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Error loading user data');
            }
        });

        async function logout() {
            try {
                const response = await fetch('https://thawing-eyrie-19296-07f5925e2a04.herokuapp.com/logout', {
                    method: 'POST',


                    headers: {
                        'Content-Type': 'application/json'
                    }
                });
                const data = await response.json();
                if (data.success) {
                    window.location.href = 'login.html'; // Redirect to login page
                } else {
                    alert('Logout failed');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Error during logout');
            }
        }
    </script>
</head>

<body>
    <h1>Hello, </h1>
    <button onclick="logout()">Logout</button>
</body>

</html>